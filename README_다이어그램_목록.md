# 📊 Saga 패턴 - 흐름도 모음

## 개요
주문-결제 시스템의 Saga 패턴 구현을 다양한 관점에서 시각화한 Mermaid 다이어그램 모음입니다.

## 📁 다이어그램 파일 목록

### 1️⃣ [전체 처리 흐름도](./01_전체_처리_흐름도.md)
**파일명**: `01_전체_처리_흐름도.md`
**타입**: 플로우차트 (Flowchart)
**설명**: 
- 주문 생성부터 결제 완료까지의 전체 프로세스 흐름
- 정상 처리 경로와 실패 시 보상 트랜잭션 처리
- 모니터링 및 재시도 기능 포함

### 2️⃣ [서비스 간 상호작용 시퀀스](./02_서비스_간_상호작용_시퀀스.md)
**파일명**: `02_서비스_간_상호작용_시퀀스.md`
**타입**: 시퀀스 다이어그램 (Sequence Diagram)
**설명**: 
- 클라이언트, 주문 서비스, 결제 서비스, Kafka 간의 시간 순서별 통신
- 정상 처리 및 실패 시나리오 모두 포함
- 메시지 포맷과 API 호출 순서 상세 설명

### 3️⃣ [Saga 상태 전이도](./03_Saga_상태_전이도.md)
**파일명**: `03_Saga_상태_전이도.md`
**타입**: 상태 다이어그램 (State Diagram)
**설명**: 
- Saga 트랜잭션의 모든 상태와 전이 조건
- 타임아웃 처리 및 재시도 로직
- 각 상태별 비즈니스 의미와 데이터베이스 매핑

### 4️⃣ [시스템 아키텍처](./04_시스템_아키텍처.md)
**파일명**: `04_시스템_아키텍처.md`
**타입**: 컴포넌트 다이어그램 (Component Diagram)
**설명**: 
- 마이크로서비스 전체 아키텍처 구조
- 각 서비스의 구성 요소와 역할
- 데이터베이스, Kafka, 외부 시스템 연결 관계

### 5️⃣ [데이터 모델 관계도](./05_데이터_모델_관계도.md)
**파일명**: `05_데이터_모델_관계도.md`
**타입**: ERD (Entity Relationship Diagram)
**설명**: 
- 주요 테이블 구조와 관계
- 완전한 DDL 스크립트
- 데이터 일관성 전략 및 모니터링 쿼리

## 🎯 사용 목적별 추천

### 👥 비즈니스 이해관계자
- **추천**: 1️⃣ 전체 처리 흐름도 → 2️⃣ 서비스 간 상호작용 시퀀스
- **이유**: 전체 비즈니스 프로세스와 서비스 간 상호작용을 쉽게 이해

### 👨‍💻 개발자 (신규 투입)
- **추천**: 4️⃣ 시스템 아키텍처 → 1️⃣ 전체 처리 흐름도 → 2️⃣ 서비스 간 상호작용 시퀀스
- **이유**: 시스템 전체 구조 파악 후 상세 플로우 이해

### 🔧 운영자 (DevOps/SRE)
- **추천**: 3️⃣ Saga 상태 전이도 → 4️⃣ 시스템 아키텍처 → 5️⃣ 데이터 모델 관계도
- **이유**: 상태 관리, 모니터링, 데이터베이스 구조 이해 필요

### 🏗️ 아키텍트
- **추천**: 4️⃣ 시스템 아키텍처 → 5️⃣ 데이터 모델 관계도 → 3️⃣ Saga 상태 전이도
- **이유**: 시스템 설계 관점에서 전체 아키텍처와 데이터 모델 중심 이해

## 🛠️ 기술 스택

### 시스템 구성
- **언어**: Java 17
- **프레임워크**: Spring Boot 3.x
- **메시지 브로커**: Apache Kafka
- **데이터베이스**: H2 (개발), MySQL (운영)
- **빌드 도구**: Maven

### 패턴 및 아키텍처
- **Saga 패턴**: 분산 트랜잭션 관리
- **마이크로서비스**: 서비스별 독립 배포
- **이벤트 드리븐**: 비동기 메시지 기반 통신
- **오케스트레이션**: 중앙 집중식 워크플로우 관리

## 📈 주요 메트릭

### 성능 지표
- **처리 시간**: 평균 3-5초 (정상 흐름)
- **처리량**: 초당 100-200 트랜잭션
- **성공률**: 95% 이상 (정상 운영 시)

### 모니터링 포인트
- Saga 상태별 분포
- 평균 처리 시간
- 보상 트랜잭션 발생 빈도
- 타임아웃 발생률

## 🚀 다음 단계

### 확장 계획
1. **재고 서비스 추가**: 주문-재고-결제 3단계 Saga
2. **배송 서비스 연동**: 결제 완료 후 자동 배송 요청
3. **알림 서비스**: 각 단계별 고객 알림 발송

### 개선 사항
1. **Circuit Breaker 패턴**: 외부 서비스 장애 대응
2. **Bulkhead 패턴**: 리소스 격리
3. **CQRS 패턴**: 읽기/쓰기 분리

## 📞 문의 사항
이 다이어그램들에 대한 질문이나 개선 제안이 있으시면 언제든지 연락주세요!

---
*📅 최종 업데이트: 2024년*
*🏷️ 버전: 1.0* 